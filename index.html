<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thai Consonants Quiz</title>
  <style>
    :root {
      --bg: #0b0f17;
      --card: #121a2a;
      --text: #e8eefc;
      --muted: #a9b7d0;
      --good: #35d07f;
      --bad: #ff5b6e;
      --btn: #1a2540;
      --border: rgba(255,255,255,.12);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1000px 600px at 20% 10%, rgba(85,120,255,.18), transparent 60%),
                  radial-gradient(800px 500px at 80% 20%, rgba(53,208,127,.14), transparent 55%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 20px;
    }
    .wrap { width: 100%; max-width: 520px; }
    .top {
      display: flex; justify-content: space-between; align-items: baseline;
      margin-bottom: 12px;
      gap: 12px;
    }
    h1 { font-size: 18px; margin: 0; letter-spacing: .2px; }
    .stats { color: var(--muted); font-size: 13px; }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px;
      box-shadow: 0 20px 50px rgba(0,0,0,.35);
    }
    .glyph {
      font-size: 92px;
      line-height: 1;
      text-align: center;
      padding: 18px 0 10px;
      letter-spacing: 1px;
      user-select: none;
    }
    .hintLine {
      text-align: center;
      color: var(--muted);
      font-size: 13px;
      min-height: 18px;
      margin-bottom: 16px;
    }
    .row { display: flex; gap: 10px; }
    input {
      flex: 1;
      background: rgba(0,0,0,.25);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 12px;
      font-size: 15px;
      color: var(--text);
      outline: none;
    }
    input:focus { border-color: rgba(85,120,255,.55); }
    button {
      background: var(--btn);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 12px 12px;
      border-radius: 12px;
      font-size: 14px;
      cursor: pointer;
      user-select: none;
      transition: transform .05s ease, background .2s ease, border-color .2s ease;
      white-space: nowrap;
    }
    button:hover { background: rgba(26,37,64,.9); border-color: rgba(255,255,255,.2); }
    button:active { transform: translateY(1px); }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .msg {
      margin-top: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.18);
      font-size: 14px;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .msg strong { font-weight: 700; }
    .good { color: var(--good); }
    .bad { color: var(--bad); }

    .mini {
      color: var(--muted);
      font-size: 12px;
      margin-top: 12px;
      line-height: 1.35;
    }
    .kbd {
      border: 1px solid var(--border);
      padding: 1px 6px;
      border-radius: 7px;
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <h1>Thai Consonants Quiz</h1>
      <div class="stats">
        Score: <span id="score">0</span> |
        Streak: <span id="streak">0</span> |
        Left: <span id="left">0</span>
      </div>
    </div>

    <div class="card">
      <div class="glyph" id="glyph">‡∏Å</div>
      <div class="hintLine" id="hintLine"></div>

      <div class="row">
        <input id="answer" type="text" placeholder="Type the English name (e.g., ko kai)" autocomplete="off" />
        <button id="checkBtn">Check</button>
      </div>

      <div class="actions">
        <button id="hintBtn">Hint</button>
        <button id="speakBtn">Speak</button>
        <button id="skipBtn">Skip</button>
        <button id="resetBtn">Reset</button>
      </div>

      <div class="msg" id="msg">
        <span>Type the consonant name in English, then press <span class="kbd">Enter</span>.</span>
        <span></span>
      </div>

      <div class="mini">
        Tips: answers are flexible. Examples accepted: <em>ko kai</em>, <em>ko-kai</em>, <em>korkai</em>.
      </div>
    </div>
  </div>

  <script>
    // Thai consonants (44) with standard English names.
    // Note: Some consonants are obsolete/rare (‡∏É, ‡∏Ö) but kept for completeness.
    const CONSONANTS = [
      { th: "‡∏Å", en: ["ko kai", "koko kai", "korkai"], ipa: "k…î…î k√†i" },
      { th: "‡∏Ç", en: ["kho khai", "khokhai"], ipa: "k ∞…îÃå…î k ∞√†i" },
      { th: "‡∏É", en: ["kho khuat", "khokhuat"], ipa: "k ∞…îÃå…î k ∞√πat" },
      { th: "‡∏Ñ", en: ["kho khwai", "khokhwai"], ipa: "k ∞…î…î k ∞wƒÅi" },
      { th: "‡∏Ö", en: ["kho khon", "khokhon"], ipa: "k ∞…î…î k ∞on" },
      { th: "‡∏Ü", en: ["kho rakhang", "khorakhang", "kho ra khang"], ipa: "k ∞…î…î r√°-k ∞a≈ã" },
      { th: "‡∏á", en: ["ngo ngu", "ngongu"], ipa: "≈ã…î…î ≈ãuu" },
      { th: "‡∏à", en: ["cho chan", "chochan"], ipa: "t…ï…î…î t…ïan" },
      { th: "‡∏â", en: ["cho ching", "choching"], ipa: "t…ï ∞…îÃå…î t…ï ∞√¨≈ã" },
      { th: "‡∏ä", en: ["cho chang", "chochang"], ipa: "t…ï ∞…î…î t…ï ∞ƒÅ≈ã" },
      { th: "‡∏ã", en: ["so so", "soso"], ipa: "s…î…î s…î…î" },
      { th: "‡∏å", en: ["cho choe", "chochoe"], ipa: "t…ï ∞…î…î t…ï ∞…ô…ô" },
      { th: "‡∏ç", en: ["yo ying", "yoying"], ipa: "j…î…î ji≈ã" },
      { th: "‡∏é", en: ["do chada", "dochada"], ipa: "d…î…î t…ï ∞a-daa" },
      { th: "‡∏è", en: ["to patak", "topatak"], ipa: "t…î…î p√†-t√†k" },
      { th: "‡∏ê", en: ["tho than", "thothan"], ipa: "t ∞…îÃå…î t ∞«éan" },
      { th: "‡∏ë", en: ["tho montho", "thomontho", "tho mon tho"], ipa: "t ∞…î…î mon-t ∞…î…î" },
      { th: "‡∏í", en: ["tho phuthao", "thophuthao", "tho phu thao"], ipa: "t ∞…î…î p ∞√ª-t ∞ao" },
      { th: "‡∏ì", en: ["no nen", "n√∂nen", "nonen"], ipa: "n…î…î nen" },
      { th: "‡∏î", en: ["do dek", "dodek"], ipa: "d…î…î d√®k" },
      { th: "‡∏ï", en: ["to tao", "totao"], ipa: "t…î…î tao" },
      { th: "‡∏ñ", en: ["tho thung", "thothung"], ipa: "t ∞…îÃå…î t ∞«î≈ã" },
      { th: "‡∏ó", en: ["tho thahan", "thothahan", "tho tha han"], ipa: "t ∞…î…î t ∞a-h«éan" },
      { th: "‡∏ò", en: ["tho thong", "thothong"], ipa: "t ∞…î…î t ∞…î…î≈ã" },
      { th: "‡∏ô", en: ["no nu", "nonu"], ipa: "n…î…î nuu" },
      { th: "‡∏ö", en: ["bo baimai", "bobaima i", "bo baimai", "bobaimai"], ipa: "b…î…î bai-mƒÅi" },
      { th: "‡∏õ", en: ["po pla", "popla"], ipa: "p…î…î plaa" },
      { th: "‡∏ú", en: ["pho phung", "phophung"], ipa: "p ∞…îÃå…î p ∞«î≈ã" },
      { th: "‡∏ù", en: ["fo fa", "fofa"], ipa: "f…îÃå…î faa" },
      { th: "‡∏û", en: ["pho phan", "phophan"], ipa: "p ∞…î…î p ∞aan" },
      { th: "‡∏ü", en: ["fo fan", "fofan"], ipa: "f…î…î fan" },
      { th: "‡∏†", en: ["pho samphao", "phosamphao", "pho sam phao"], ipa: "p ∞…î…î s«ém-p ∞ao" },
      { th: "‡∏°", en: ["mo ma", "moma"], ipa: "m…î…î maa" },
      { th: "‡∏¢", en: ["yo yak", "yoyak"], ipa: "j…î…î j√°k" },
      { th: "‡∏£", en: ["ro ruea", "roruea", "ro rua"], ipa: "r…î…î r âa" },
      { th: "‡∏•", en: ["lo ling", "loling"], ipa: "l…î…î li≈ã" },
      { th: "‡∏ß", en: ["wo waen", "wowaen", "wo waen"], ipa: "w…î…î w…õÃå…õn" },
      { th: "‡∏®", en: ["so sala", "sosala"], ipa: "s…îÃå…î s«éa-laa" },
      { th: "‡∏©", en: ["so ruesi", "soruesi", "so rusi", "sorusi"], ipa: "s…îÃå…î r â â-s«êi" },
      { th: "‡∏™", en: ["so suea", "sosuea"], ipa: "s…îÃå…î s âÃåa" },
      { th: "‡∏´", en: ["ho hip", "hohip"], ipa: "h…îÃå…î h√¨p" },
      { th: "‡∏¨", en: ["lo chula", "lochula"], ipa: "l…î…î t…ï ∞u-laa" },
      { th: "‡∏≠", en: ["o ang", "oang"], ipa: " î…î…î  îaa≈ã" },
      { th: "‡∏Æ", en: ["ho nokhuk", "honokhuk", "ho nok huk"], ipa: "h…î…î n√≥k-h√ªuk" }
    ];

    // --- helpers ---
    const $ = (id) => document.getElementById(id);

    function normalize(s) {
      return (s || "")
        .toLowerCase()
        .trim()
        .replace(/[\u2019']/g, "")     // remove apostrophes
        .replace(/[-_.]/g, " ")       // hyphen/underscore/dot -> space
        .replace(/\s+/g, " ");        // collapse spaces
    }

    function shuffle(array) {
      const a = array.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    // --- state ---
    let deck = shuffle(CONSONANTS);
    let index = 0;
    let score = 0;
    let streak = 0;
    let hintShown = false;

    const glyphEl = $("glyph");
    const answerEl = $("answer");
    const msgEl = $("msg");
    const hintLineEl = $("hintLine");
    const scoreEl = $("score");
    const streakEl = $("streak");
    const leftEl = $("left");

    function currentCard() {
      return deck[index];
    }

    function updateStats() {
      scoreEl.textContent = String(score);
      streakEl.textContent = String(streak);
      leftEl.textContent = String(deck.length - index);
    }

    function setMessage(text, kind = "") {
      const right = kind === "good" ? `<strong class="good">Correct</strong>` :
                    kind === "bad"  ? `<strong class="bad">Wrong</strong>` : "";
      msgEl.innerHTML = `<span>${text}</span><span>${right}</span>`;
    }

    function showCard() {
      if (index >= deck.length) {
        glyphEl.textContent = "üéâ";
        hintLineEl.textContent = "";
        answerEl.value = "";
        answerEl.disabled = true;
        $("checkBtn").disabled = true;
        $("hintBtn").disabled = true;
        $("speakBtn").disabled = true;
        $("skipBtn").disabled = true;
        setMessage(`Done! Final score: ${score}/${deck.length}. Press Reset to play again.`);
        updateStats();
        return;
      }

      const card = currentCard();
      glyphEl.textContent = card.th;
      hintLineEl.textContent = ""; // reset hint line
      hintShown = false;

      answerEl.value = "";
      answerEl.disabled = false;
      $("checkBtn").disabled = false;
      $("hintBtn").disabled = false;
      $("speakBtn").disabled = false;
      $("skipBtn").disabled = false;

      answerEl.focus();
      setMessage("Type the consonant name in English, then press Enter.");
      updateStats();
    }

    function checkAnswer() {
      if (index >= deck.length) return;

      const card = currentCard();
      const user = normalize(answerEl.value);

      if (!user) {
        setMessage("Type something first üôÇ");
        return;
      }

      const accepted = card.en.map(normalize);
      const isCorrect = accepted.includes(user);

      if (isCorrect) {
        score += 1;
        streak += 1;
        setMessage(`‚úÖ ${card.th} is "${card.en[0]}".`, "good");
        index += 1;
        setTimeout(showCard, 550);
      } else {
        streak = 0;
        setMessage(`‚ùå Not quite. Try again, or press Hint.`, "bad");
      }

      updateStats();
    }

    function showHint() {
      if (index >= deck.length) return;
      const card = currentCard();

      if (!hintShown) {
        // Simple hint: first letter(s) of the English name
        const main = card.en[0];
        const parts = main.split(" ");
        const hint = parts.map(p => p.slice(0, Math.min(2, p.length)) + "‚Ä¶").join(" ");
        hintLineEl.textContent = `Hint: starts like "${hint}"`;
        hintShown = true;
      } else {
        // Second hint: show full answer
        hintLineEl.textContent = `Answer: ${card.en[0]} (approx. ${card.ipa})`;
      }
    }

    function skipCard() {
      if (index >= deck.length) return;
      const card = currentCard();
      streak = 0;
      setMessage(`Skipped. It was "${card.en[0]}".`);
      index += 1;
      updateStats();
      setTimeout(showCard, 450);
    }

    function resetGame() {
      deck = shuffle(CONSONANTS);
      index = 0;
      score = 0;
      streak = 0;
      hintShown = false;
      answerEl.disabled = false;
      showCard();
    }

    function speakThai() {
      if (index >= deck.length) return;
      const card = currentCard();

      // Use Web Speech API if available
      if (!("speechSynthesis" in window)) {
        setMessage("Speech is not supported in this browser.");
        return;
      }

      const u = new SpeechSynthesisUtterance(card.th);
      // Try Thai voice if available; if not, browser will fallback.
      u.lang = "th-TH";
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
      setMessage(`Speaking: ${card.th}`);
    }

    // --- events ---
    $("checkBtn").addEventListener("click", checkAnswer);
    $("hintBtn").addEventListener("click", showHint);
    $("skipBtn").addEventListener("click", skipCard);
    $("resetBtn").addEventListener("click", resetGame);
    $("speakBtn").addEventListener("click", speakThai);

    answerEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAnswer();
      if (e.key === "Escape") skipCard();
    });

    // start
    resetGame();
  </script>
</body>
</html>